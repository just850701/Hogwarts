<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ†é™¢æ¸¬é©—</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <script src="../js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        main {
            font-family: "Segoe UI", sans-serif;
            position: relative;
            min-height: 100vh;
            padding-top: 40px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 500px;
        }

        .question {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #ffc107;
            /* Bootstrap warning åŒè‰² */
        }

        .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .btns {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        button {
            padding: 8px 20px;
            border: none;
            background-color: #4b2e83;
            color: #fff;
            border-radius: 6px;
            cursor: pointer;
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #result {
            text-align: center;
            padding: 30px;
            min-width: 500px;
        }
    </style>

</head>

<body>

    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid px-0 d-flex align-items-center">
                <a class="navbar-brand ms-3" href="../index.html" style="height: 40px;">
                    <img src="../img/hogwarts_LOGO.png" alt="Hogwarts Logo" style="height: 100%;">
                </a>
                <ul class="navbar-nav mx-auto d-flex flex-row" style="list-style: none;">
                    <li class="nav-item"><a class="nav-link" href="../10_houses/houses.html">å­¸é™¢</a></li>
                    <li class="nav-item"><a class="nav-link" href="../20_professor/professor.html">å¸«è³‡</a></li>
                    <li class="nav-item"><a class="nav-link" href="../30_courses/courses.html">èª²ç¨‹</a></li>
                    <li class="nav-item"><a class="nav-link" href="../40_activities/activities.html">æ´»å‹•</a></li>
                    <li class="nav-item"><a class="nav-link" href="../50_alumni/alumni.html">äº¤é€š</a></li>
                    <li class="nav-item"><a class="nav-link" href="../60_test/test.html">åˆ†é™¢æ¸¬é©—</a></li>
                </ul>
                <!-- ç™»å…¥å€ -->
                <div id="login-area" class="mx-4 text-light"></div>
            </div>
        </nav>

    </header>

    <main>
        <h1 class="my-4" style="color: #b297e9;">âš¡ éœæ ¼è¯èŒ²åˆ†é™¢æ¸¬é©— âš¡</h1>
        <div class="quiz-card" id="quizCard">
            <div id="questionContainer">
                <!-- é¡Œç›®æœƒç”± JS æ’å…¥ -->
            </div>
            <div class="btns">
                <button onclick="prevQuestion()" id="prevBtn">â† ä¸Šä¸€é¡Œ</button>
                <button onclick="nextQuestion()" id="nextBtn" disabled>ä¸‹ä¸€é¡Œ â†’</button>
            </div>
        </div>

    </main>

    <br><br><br>

    <a href="#" class="back-to-top" data-aos="fade-up">
        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor"
            class="bi bi-arrow-up-circle text-white text-opacity-75" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z" />
        </svg>
    </a>

    <footer class="text-center text-light py-4">
        <p>Â© 2025 éœæ ¼è¯èŒ²é­”æ³•å­¸æ ¡. All rights reserved.</p>
        <p class="fst-italic">ã€Œåˆ¥å¿˜äº†æª¢æŸ¥ä½ çš„è²“é ­é·¹éƒµä»¶ä¿¡ç®±ï¼ã€</p>
    </footer>

    <!-- èƒŒæ™¯æ˜Ÿæ˜Ÿå‹•ç•« -->
    <div id="particles-js"></div>
    <script>
        tsParticles.load("particles-js", {
            background: {
                color: "#10141b"  // èƒŒæ™¯æ·±è—è‰²
            },
            particles: {
                number: { value: 50 },
                color: { value: "#d2aa6b" }, // é‡‘è‰²
                shape: { type: "star" },
                opacity: { value: 0.8 },
                size: { value: 2 },
                move: {
                    enable: true,
                    speed: 0.3, // ç·©æ…¢ç§»å‹•
                    direction: "none",
                    random: true,
                    straight: false
                }
            },
            fullScreen: {
                enable: true,
                zIndex: -1 // è®“ç²’å­åœ¨æœ€åº•å±¤
            }
        });


        // é¡Œç›®ä¸»é«”
        const questions = [
            {
                text: "1. é‡åˆ°å›°é›£æ™‚ï¼Œä½ æœƒæ€éº¼åšï¼Ÿ",
                options: {
                    slytherin: "æ‰¾æ–¹æ³•è®“è‡ªå·±è„«å›°",
                    ravenclaw: "å†·éœæ€è€ƒå°ç­–",
                    gryffindor: "å‹‡æ•¢é¢å°æŒ‘æˆ°",
                    hufflepuff: "å‘æœ‹å‹è«‹æ•™",
                }
            },
            {
                text: "2. ä½ æœ€é‡è¦–ä»€éº¼åƒ¹å€¼ï¼Ÿ",
                options: {
                    hufflepuff: "å¿ èª èˆ‡èª å¯¦",
                    ravenclaw: "çŸ¥è­˜èˆ‡å‰µæ„",
                    slytherin: "æˆå°±èˆ‡é‡å¿ƒ",
                    gryffindor: "æ­£ç¾©èˆ‡å‹‡æ°£",
                }
            },
            {
                text: "3. åœ¨å­¸æ ¡ä½ æœ€å–œæ­¡çš„æ´»å‹•æ˜¯ï¼Ÿ",
                options: {
                    slytherin: "é ˜å°ç¤¾åœ˜èˆ‡ç«¶è³½",
                    gryffindor: "é«”è‚²æ¯”è³½èˆ‡å†’éšª",
                    hufflepuff: "å¹«åŠ©åŒå­¸èˆ‡åˆä½œ",
                    ravenclaw: "è§£è¬èˆ‡é–±è®€",
                }
            },
            {
                text: "4. å¦‚æœä½ æ’¿åˆ°ä¸€æœ¬ç¦æ›¸ï¼Œä½ æœƒï¼Ÿ",
                options: {
                    ravenclaw: "ç ”ç©¶å®ƒçš„ä¾†æºèˆ‡æ„ç¾©",
                    gryffindor: "é¦¬ä¸Šè®€çœ‹çœ‹å…§å®¹",
                    hufflepuff: "äº¤çµ¦è€å¸«è™•ç†",
                    slytherin: "æš—è‡ªä¿ç•™ä¸¦è§€å¯Ÿå…¶ç”¨é€”"
                }
            },
            {
                text: "5. ä½ å¸Œæœ›ç•¢æ¥­å¾Œæˆç‚ºä»€éº¼æ¨£çš„äººï¼Ÿ",
                options: {
                    gryffindor: "è‹±å‹‡ä¸”è®“äººå°Šæ•¬",
                    slytherin: "æœ‰æ¬ŠåŠ›èˆ‡å½±éŸ¿åŠ›",
                    ravenclaw: "åšå­¸ä¸”å—äººæ•¬ä½©",
                    hufflepuff: "æº«æš–ä¸”å€¼å¾—ä¿¡ä»»",
                }
            }
        ];

        let currentIndex = 0;
        let answers = [];
        const quizCard = document.getElementById("quizCard");
        const initialHTML = quizCard.innerHTML; // å„²å­˜åŸå§‹ HTML

        function renderQuestion() {
            const q = questions[currentIndex];
            const container = document.getElementById("questionContainer");

            const optionsHTML = Object.entries(q.options)
                .map(([value, label]) => `
      <label>
        <input type="radio" name="answer" value="${value}" onclick="selectAnswer('${value}')">
        ${label}
        </label>
        `).join("");

            container.innerHTML = `
            <div class="question">${q.text}</div>
            <div class="options">${optionsHTML}</div>
            `;

            document.getElementById("prevBtn").disabled = currentIndex === 0;
            document.getElementById("nextBtn").disabled = !answers[currentIndex];
            document.getElementById("nextBtn").textContent = (currentIndex === questions.length - 1) ? "æŸ¥çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ â†’";
        }

        function selectAnswer(value) {
            answers[currentIndex] = value;
            document.getElementById("nextBtn").disabled = false;
        }

        function nextQuestion() {
            if (currentIndex < questions.length - 1) {
                currentIndex++;
                renderQuestion();
            } else {
                showResult();
            }
        }

        function prevQuestion() {
            if (currentIndex > 0) {
                currentIndex--;
                renderQuestion();
            }
        }

        function showResult() {
            const scores = { gryffindor: 0, ravenclaw: 0, hufflepuff: 0, slytherin: 0 };
            answers.forEach(ans => scores[ans]++);
            const house = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);

            const messages = {
                gryffindor: "ä½ æ“æœ‰ç„¡ç•çš„å‹‡æ°£èˆ‡æ­£ç›´ï¼Œæ˜¯è‘›ä¾†åˆ†å¤šçš„çœŸæ­£ä»£è¡¨ï¼",
                ravenclaw: "ä½ å……æ»¿æ™ºæ…§èˆ‡å‰µé€ åŠ›ï¼Œé›·æ–‡å…‹å‹æ­¡è¿ä½ çš„åŠ å…¥ï¼",
                hufflepuff: "ä½ è¸å¯¦ã€å¿ èª åˆå¯é ï¼Œèµ«å¤«å¸•å¤«æ­£æ˜¯ä½ çš„æ­¸å±¬ï¼",
                slytherin: "ä½ å……æ»¿é‡å¿ƒèˆ‡ç­–ç•¥ï¼Œå²èŠå“²æ—æœ€é©åˆä½ ç™¼å…‰ç™¼ç†±ï¼"
            };

            const data = houseData[house];

            document.getElementById("quizCard").innerHTML = `
            <div id="result" class="fade-in-zoom">
                <div class="card img-fluid" style="width:250px; margin:auto;">
                    <img class="card-img-top" src="${data.img}" alt="${data.name}">
                    <div class="card-body">
                        <h4 class="card-title text-center" style="color:${data.color};">${data.name}</h4>
                        <p class="card-text text-white">${messages[house]}</p>
                    </div>
                </div>
                <button onclick="restart()" style="margin-top:20px;">é‡æ–°æ¸¬é©—</button>
            </div>
        `;

            // âœ¨ åŠ å…¥ç‘å½©å¸¶ç‰¹æ•ˆ
            confetti({
                particleCount: 120,
                spread: 90,
                origin: { y: 0.3 }
            });
        }


        const houseData = {
            gryffindor: {
                name: "è‘›ä¾†åˆ†å¤š",
                color: "#c90f0f",
                img: "../img/gryffindor.png"
            },
            ravenclaw: {
                name: "é›·æ–‡å…‹å‹",
                color: "#2130ff",
                img: "../img/ravenclaw.png"
            },
            hufflepuff: {
                name: "èµ«å¤«å¸•å¤«",
                color: "#EEE117",
                img: "../img/hufflepuff.png"
            },
            slytherin: {
                name: "å²èŠå“²æ—",
                color: "#268531",
                img: "../img/slytherin.png"
            }
        };



        function restart() {
            const quizCard = document.getElementById("quizCard"); // é‡æ–°æŠ“
            currentIndex = 0;
            answers = [];
            quizCard.innerHTML = initialHTML;
            renderQuestion();
            // æ·¡å…¥æ•ˆæœ
            quizCard.classList.add("fade-in");
            setTimeout(() => quizCard.classList.remove("fade-in"), 600); // å‹•ç•«è·‘å®Œç§»é™¤
        }


        renderQuestion();

        // auth.js

        document.addEventListener("DOMContentLoaded", () => {
            const loginArea = document.getElementById("login-area");
            const professorName = localStorage.getItem("professorName");

            if (professorName) {
                // âœ… å·²ç™»å…¥ç‹€æ…‹ï¼Œé¡¯ç¤ºåç¨±ï¼‹ç™»å‡º
                loginArea.innerHTML = `
      <span class="me-2">ğŸ‘¨â€ğŸ« ${professorName}</span>
      <button id="logout-btn" class="btn btn-sm btn-outline-light">ç™»å‡º</button>
    `;

                document.getElementById("logout-btn").addEventListener("click", () => {
                    if (confirm("ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ")) {
                        localStorage.removeItem("professorName");
                        location.reload(); // é‡æ–°æ•´ç†é é¢
                    }
                });

            } else {
                // âŒ æœªç™»å…¥ç‹€æ…‹ï¼Œé¡¯ç¤ºç™»å…¥æŒ‰éˆ•
                loginArea.innerHTML = `
      <a href="../login/login.html" class="btn btn-sm btn-outline-warning">ç™»å…¥</a>
    `;
            }
        });


    </script>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <script src="./js/auth.js"></script>


</body>

</html>