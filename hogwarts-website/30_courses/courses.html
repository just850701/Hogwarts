<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>課程</title>
  <link rel="stylesheet" href="../css/bootstrap.css" />
  <script src="../js/bootstrap.bundle.js"></script>
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
  <style>
    .hero {
      background-image: url('../img/bg_potion.jpg');
    }
  </style>
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid px-0 d-flex align-items-center">
        <a class="navbar-brand ms-3" href="../index.html" style="height: 40px;">
          <img src="../img/hogwarts_LOGO.png" alt="Hogwarts Logo" style="height: 100%;" />
        </a>
        <ul class="navbar-nav mx-auto d-flex flex-row" style="list-style: none;">
          <li class="nav-item"><a class="nav-link" href="../10_houses/houses.html">學院</a></li>
          <li class="nav-item"><a class="nav-link" href="../20_professor/professor.html">師資</a></li>
          <li class="nav-item"><a class="nav-link" href="../30_courses/courses.html">課程</a></li>
          <li class="nav-item"><a class="nav-link" href="../40_activities/activities.html">活動</a></li>
          <li class="nav-item"><a class="nav-link" href="../50_alumni/alumni.html">交通</a></li>
          <li class="nav-item"><a class="nav-link" href="../60_test/test.html">分院測驗</a></li>
        </ul>
        <a class="btn btn-outline-light mx-4" href="../login/login.html">登入</a>
      </div>
    </nav>
  </header>

  <main>
    <!-- Hero 區 -->
    <section class="hero d-flex justify-content-center align-items-center text-center text-light">
      <div class="fog"></div>
      <div class="hero-text">
        <h1 class="fw-bold text-warning py-2">課程介紹</h1>
        <p>魔法與現實交織的知識探索，掌握元素魔法與古老符文。</p>
      </div>
    </section>
    <div class="magic-divider"></div>

    <!-- 搜尋欄 -->
    <div class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="搜尋課程..." aria-label="搜尋課程"
              aria-describedby="button-search" />
            <button class="btn btn-outline-secondary" type="button" id="button-search">搜尋</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 課程卡片容器 -->
    <div class="container mt-4">
      <div class="row justify-content-center" id="courses-container">
        <!-- JS 動態載入卡片 -->
      </div>
    </div>
  </main>

  <br /><br /><br />

  <a href="#" class="back-to-top" data-aos="fade-up">
    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor"
      class="bi bi-arrow-up-circle text-white text-opacity-75" viewBox="0 0 16 16">
      <path fill-rule="evenodd"
        d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z" />
    </svg>
  </a>

  <footer class="text-center text-light py-4">
    <p>© 2025 霍格華茲魔法學校. All rights reserved.</p>
    <p class="fst-italic">「別忘了檢查你的貓頭鷹郵件信箱！」</p>
  </footer>

  <!-- 星星背景動畫 -->
  <div id="particles-js"></div>
  <script>
    tsParticles.load("particles-js", {
      background: { color: "#10141b" },
      particles: {
        number: { value: 50 },
        color: { value: "#d2aa6b" },
        shape: { type: "star" },
        opacity: { value: 0.8 },
        size: { value: 2 },
        move: { enable: true, speed: 0.3, direction: "none", random: true, straight: false }
      },
      fullScreen: { enable: true, zIndex: -1 }
    });

    // 載入課程資料並加上搜尋功能
    fetch('../getinfo/get_courses.php')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('courses-container');
        const searchInput = document.querySelector('.form-control');
        const searchButton = document.getElementById('button-search');
        const allCards = [];

        data.forEach(course => {
          const col = document.createElement('div');
          col.className = 'col-md-4 mb-4';
          col.style.width = "350px";

          col.innerHTML = `
            <div class="card img-fluid hvr-grow" style="width:100%">
              <img class="card-img-top" src="../img/${course.image}" alt="${course.cname}">
              <div class="card-body text-center">
                <h4 class="card-title text-warning">${course.cname}</h4>
                <h5 class="card-text text-white">${course.description || ''}</h5>
              </div>
            </div>
          `;
          container.appendChild(col);
          allCards.push({ element: col, name: course.cname, description: course.description || '' });
        });

        function filterCourses(keyword) {
          const lowerKeyword = keyword.toLowerCase();
          allCards.forEach(({ element, name, description }) => {
            const isMatch = name.toLowerCase().includes(lowerKeyword) || description.toLowerCase().includes(lowerKeyword);
            element.style.display = isMatch ? 'block' : 'none';
          });
        }

        searchInput.addEventListener('input', (e) => {
          filterCourses(e.target.value);
        });

        searchButton.addEventListener('click', () => {
          filterCourses(searchInput.value);
        });
      })
      .catch(error => {
        console.error('課程資料載入失敗：', error);
      });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>
</body>

</html>
