<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>èª²ç¨‹</title>
  <link rel="stylesheet" href="../css/bootstrap.css" />
  <script src="../js/bootstrap.bundle.js"></script>
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
  <style>
    .hero {
      background-image: url('../img/bg_potion.jpg');
    }
  </style>
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid px-0 d-flex align-items-center">
        <a class="navbar-brand ms-3" href="../index.html" style="height: 40px;">
          <img src="../img/hogwarts_LOGO.png" alt="Hogwarts Logo" style="height: 100%;">
        </a>
        <ul class="navbar-nav mx-auto d-flex flex-row" style="list-style: none;">
          <li class="nav-item"><a class="nav-link" href="../10_houses/houses.html">å­¸é™¢</a></li>
          <li class="nav-item"><a class="nav-link" href="../20_professor/professor.html">å¸«è³‡</a></li>
          <li class="nav-item"><a class="nav-link" href="../30_courses/courses.html">èª²ç¨‹</a></li>
          <li class="nav-item"><a class="nav-link" href="../40_activities/activities.html">æ´»å‹•</a></li>
          <li class="nav-item"><a class="nav-link" href="../50_alumni/alumni.html">äº¤é€š</a></li>
          <li class="nav-item"><a class="nav-link" href="../60_test/test.html">åˆ†é™¢æ¸¬é©—</a></li>
        </ul>
        <!-- ç™»å…¥å€ -->
        <div id="login-area" class="mx-4 text-light"></div>
      </div>
    </nav>

  </header>

  <main>
    <!-- Hero å€ -->
    <section class="hero d-flex justify-content-center align-items-center text-center text-light">
      <div class="fog"></div>
      <div class="hero-text">
        <h1 class="fw-bold text-warning py-2">èª²ç¨‹ä»‹ç´¹</h1>
        <p>é­”æ³•èˆ‡ç¾å¯¦äº¤ç¹”çš„çŸ¥è­˜æ¢ç´¢ï¼ŒæŒæ¡å…ƒç´ é­”æ³•èˆ‡å¤è€ç¬¦æ–‡ã€‚</p>
      </div>
    </section>
    <div class="magic-divider"></div>

    <!-- æœå°‹æ¬„å’Œæ–°å¢èª²ç¨‹æŒ‰éˆ• -->
    <div class="container mt-4">
      <div class="row justify-content-center">
        <!-- æœå°‹æ¬„ -->
        <div class="col-md-6 mb-2">
          <input type="text" class="form-control" placeholder="æœå°‹èª²ç¨‹..." id="search-course-input" />
        </div>

        <!-- æ–°å¢èª²ç¨‹æŒ‰éˆ• -->
        <div class="col-md-2 mb-2 text-md-start text-center">
          <button class="btn btn-outline-warning w-100" id="add-course-btn" type="button">æ–°å¢èª²ç¨‹</button>
        </div>
      </div>
    </div>



    <!-- èª²ç¨‹å¡ç‰‡å®¹å™¨ -->
    <div class="container mt-4">
      <div class="row justify-content-center" id="courses-container">
        <!-- JS å‹•æ…‹è¼‰å…¥å¡ç‰‡ -->
      </div>
    </div>
  </main>

  <br /><br /><br />

  <a href="#" class="back-to-top" data-aos="fade-up">
    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor"
      class="bi bi-arrow-up-circle text-white text-opacity-75" viewBox="0 0 16 16">
      <path fill-rule="evenodd"
        d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z" />
    </svg>
  </a>

  <footer class="text-center text-light py-4">
    <p>Â© 2025 éœæ ¼è¯èŒ²é­”æ³•å­¸æ ¡. All rights reserved.</p>
    <p class="fst-italic">ã€Œåˆ¥å¿˜äº†æª¢æŸ¥ä½ çš„è²“é ­é·¹éƒµä»¶ä¿¡ç®±ï¼ã€</p>
  </footer>

  <!-- æ˜Ÿæ˜ŸèƒŒæ™¯å‹•ç•« -->
  <div id="particles-js"></div>
  <script>
    tsParticles.load("particles-js", {
      background: { color: "#10141b" },
      particles: {
        number: { value: 50 },
        color: { value: "#d2aa6b" },
        shape: { type: "star" },
        opacity: { value: 0.8 },
        size: { value: 2 },
        move: { enable: true, speed: 0.3, direction: "none", random: true, straight: false }
      },
      fullScreen: { enable: true, zIndex: -1 }
    });

    // è¼‰å…¥èª²ç¨‹è³‡æ–™ä¸¦åŠ ä¸Šå³æ™‚æœå°‹åŠŸèƒ½ï¼ˆç„¡æœå°‹æŒ‰éˆ•ï¼‰
    fetch('../getinfo/get_courses.php')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('courses-container');
        const searchInput = document.querySelector('.form-control');
        const allCards = [];

        data.forEach(course => {
          const col = document.createElement('div');
          col.className = 'col-md-4 mb-4';
          col.style.width = "350px";

          col.innerHTML = `
        <div class="card img-fluid hvr-grow" style="width:100%">
          <img class="card-img-top" src="../img/${course.image}" alt="${course.cname}">
          <div class="card-body text-center">
            <h4 class="card-title text-warning">${course.cname}</h4>
            <h5 class="card-text text-white">${course.description || ''}</h5>
          </div>
        </div>
      `;
          container.appendChild(col);
          allCards.push({
            element: col,
            name: course.cname,
            description: course.description || ''
          });
        });

        // âœ… å³æ™‚æœå°‹åŠŸèƒ½ï¼ˆè¼¸å…¥è‡ªå‹•ç¯©é¸ï¼‰
        searchInput.addEventListener('input', (e) => {
          const keyword = e.target.value.trim().toLowerCase();
          allCards.forEach(({ element, name, description }) => {
            const combinedText = `${name} ${description}`.toLowerCase();
            const isMatch = combinedText.includes(keyword);
            element.style.display = isMatch ? '' : 'none';
          });
        });
      })
      .catch(error => {
        console.error('èª²ç¨‹è³‡æ–™è¼‰å…¥å¤±æ•—ï¼š', error);
      });

    // auth.js

    document.addEventListener("DOMContentLoaded", () => {
      const loginArea = document.getElementById("login-area");
      const professorName = localStorage.getItem("professorName");

      if (professorName) {
        // âœ… å·²ç™»å…¥ç‹€æ…‹ï¼Œé¡¯ç¤ºåç¨±ï¼‹ç™»å‡º
        loginArea.innerHTML = `
      <span class="me-2">ğŸ‘¨â€ğŸ« ${professorName}</span>
      <button id="logout-btn" class="btn btn-sm btn-outline-light">ç™»å‡º</button>
    `;

        document.getElementById("logout-btn").addEventListener("click", () => {
          if (confirm("ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ")) {
            localStorage.removeItem("professorName");
            location.reload(); // é‡æ–°æ•´ç†é é¢
          }
        });

      } else {
        // âŒ æœªç™»å…¥ç‹€æ…‹ï¼Œé¡¯ç¤ºç™»å…¥æŒ‰éˆ•
        loginArea.innerHTML = `
      <a href="../login/login.html" class="btn btn-sm btn-outline-warning">ç™»å…¥</a>
    `;
      }
    });

    // âœ… æ–°å¢èª²ç¨‹æŒ‰éˆ•åŠŸèƒ½
    document.addEventListener("DOMContentLoaded", () => {
      const addCourseBtn = document.getElementById("add-course-btn");
      if (addCourseBtn) {
        addCourseBtn.addEventListener("click", () => {
          const professorName = localStorage.getItem("professorName");
          if (professorName) {
            // âœ… å·²ç™»å…¥ï¼Œå°å‘æ–°å¢èª²ç¨‹é 
            window.location.href = "../getinfo/add_course.html";
          } else {
            // âŒ æœªç™»å…¥ï¼Œå°å‘ç™»å…¥é ä¸¦åŠ ä¸Š returnUrl
            alert("è«‹å…ˆç™»å…¥ï¼");
            window.location.href = "../login/login.html";
          }
        });
      }
    });


  </script>

  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>
  <script src="./js/auth.js"></script>

</body>

</html>